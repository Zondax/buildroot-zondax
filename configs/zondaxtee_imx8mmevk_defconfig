BR2_aarch64=y
BR2_ARM_FPU_VFPV3=y
BR2_CCACHE=y
BR2_ENABLE_DEBUG=y
BR2_GLOBAL_PATCH_DIR="$(BR2_EXTERNAL_ZONDAXTEE_PATH)/board/zondax/imx8mmevk/patches"
BR2_PER_PACKAGE_DIRECTORIES=y
BR2_TOOLCHAIN_EXTERNAL=y
BR2_PACKAGE_HOST_GDB=y
BR2_PACKAGE_HOST_LINUX_HEADERS_CUSTOM_5_10=y
BR2_TARGET_GENERIC_HOSTNAME="zondaxtee"
BR2_TARGET_GENERIC_ISSUE="Welcome to Zondax TEE"
BR2_TARGET_GENERIC_GETTY_PORT="ttymxc1"
BR2_ROOTFS_OVERLAY="$(BR2_EXTERNAL_ZONDAXTEE_PATH)/board/zondax/imx8mmevk/imx-overlay/  $(BR2_EXTERNAL_ZONDAXTEE_PATH)/board/zondax/common/rootfs-overlay/"
BR2_ROOTFS_POST_IMAGE_SCRIPT="$(BR2_EXTERNAL_ZONDAXTEE_PATH)/board/zondax/imx8mmevk/generate_keys.sh $(BR2_EXTERNAL_ZONDAXTEE_PATH)/board/zondax/imx8mmevk/imx8-bootloader-prepare.sh $(BR2_EXTERNAL_ZONDAXTEE_PATH)/board/zondax/imx8mmevk/sign_image.sh $(BR2_EXTERNAL_ZONDAXTEE_PATH)/board/zondax/imx8mmevk/post-image.sh"
BR2_ROOTFS_POST_SCRIPT_ARGS="${UBOOT_DIR}/arch/arm/dts/imx8mm-evk.dtb"
BR2_LINUX_KERNEL=y
BR2_LINUX_KERNEL_CUSTOM_GIT=y
BR2_LINUX_KERNEL_CUSTOM_REPO_URL="https://source.codeaurora.org/external/imx/linux-imx"
BR2_LINUX_KERNEL_CUSTOM_REPO_VERSION="lf-5.10.y-1.0.0"
BR2_LINUX_KERNEL_DEFCONFIG="imx_v8"
BR2_LINUX_KERNEL_DTS_SUPPORT=y
BR2_LINUX_KERNEL_INTREE_DTS_NAME="freescale/imx8mm-evk freescale/imx8mm-evk-revb-qca-wifi"
BR2_LINUX_KERNEL_NEEDS_HOST_OPENSSL=y
BR2_PACKAGE_BUSYBOX_CONFIG="../busybox.config"
BR2_PACKAGE_FREESCALE_IMX=y
BR2_PACKAGE_FREESCALE_IMX_PLATFORM_IMX8MM=y
BR2_PACKAGE_FIRMWARE_IMX=y
BR2_TARGET_ROOTFS_EXT2=y
BR2_TARGET_ROOTFS_EXT2_4=y
BR2_TARGET_ROOTFS_EXT2_SIZE="120M"
BR2_TARGET_ARM_TRUSTED_FIRMWARE=y
BR2_TARGET_ARM_TRUSTED_FIRMWARE_CUSTOM_GIT=y
BR2_TARGET_ARM_TRUSTED_FIRMWARE_CUSTOM_REPO_URL="https://source.codeaurora.org/external/imx/imx-atf"
BR2_TARGET_ARM_TRUSTED_FIRMWARE_CUSTOM_REPO_VERSION="5782363f92a2fdf926784449270433cf3ddf44bd"
BR2_TARGET_ARM_TRUSTED_FIRMWARE_PLATFORM="imx8mm"
BR2_TARGET_ARM_TRUSTED_FIRMWARE_BL31=y
BR2_TARGET_ARM_TRUSTED_FIRMWARE_ADDITIONAL_VARIABLES="NEED_BL32=yes BL32_BASE=0xbe000000 SPD=opteed"
BR2_PACKAGE_OPTEE_BENCHMARK=y
BR2_PACKAGE_OPTEE_EXAMPLES=y
BR2_PACKAGE_OPTEE_TEST=y
BR2_TARGET_OPTEE_OS=y
BR2_TARGET_OPTEE_OS_CUSTOM_GIT=y
BR2_TARGET_OPTEE_OS_CUSTOM_REPO_URL="https://source.codeaurora.org/external/imx/imx-optee-os"
BR2_TARGET_OPTEE_OS_CUSTOM_REPO_VERSION="c939619d64dea014ad1b8382356eee4d1cbfbb22"
BR2_TARGET_OPTEE_OS_PLATFORM="imx"
BR2_TARGET_OPTEE_OS_PLATFORM_FLAVOR="mx8mmevk"

# Custom key to sign TAs. Noted that this will cause erros running optee examples and tests
BR2_TARGET_OPTEE_OS_ADDITIONAL_VARIABLES="CFG_NXPCRYPT=y CFG_GEN_DEK_BLOB=y CFG_UNWIND=y CFG_NXP_CAAM=y TA_PUBLIC_KEY=$(BR2_EXTERNAL_ZONDAXTEE_PATH)/keys/optee_keys/optee_pub_key.pem"

BR2_TARGET_UBOOT=y
BR2_TARGET_UBOOT_BUILD_SYSTEM_KCONFIG=y
BR2_TARGET_UBOOT_CUSTOM_GIT=y
BR2_TARGET_UBOOT_CUSTOM_REPO_URL="https://source.codeaurora.org/external/imx/uboot-imx"
BR2_TARGET_UBOOT_CUSTOM_REPO_VERSION="lf-5.10.y-1.0.0"
BR2_TARGET_UBOOT_USE_CUSTOM_CONFIG=y
BR2_TARGET_UBOOT_CUSTOM_CONFIG_FILE="$(BR2_EXTERNAL_ZONDAXTEE_PATH)/board/zondax/imx8mmevk/uboot/imx8mm_evk_trusted_defconfig"
BR2_TARGET_UBOOT_NEEDS_DTC=y
BR2_TARGET_UBOOT_FORMAT_CUSTOM=y
BR2_TARGET_UBOOT_FORMAT_CUSTOM_NAME="u-boot-nodtb.bin"
BR2_TARGET_UBOOT_SPL=y
BR2_PACKAGE_HOST_DOSFSTOOLS=y
BR2_PACKAGE_HOST_GENIMAGE=y
BR2_PACKAGE_HOST_IMX_MKIMAGE=y
BR2_PACKAGE_HOST_MTOOLS=y
BR2_PACKAGE_HOST_UBOOT_TOOLS=y
BR2_PACKAGE_HOST_UBOOT_TOOLS_FIT_SUPPORT=y

# zondaxtee applications
BR2_PACKAGE_HELLORUSTEE=y
BR2_PACKAGE_HELLORUSTEE_SIGN_TA=y
BR2_PACKAGE_TEE_SERVICE=y
BR2_PACKAGE_TEE_SERVICE_SIGN_TA=y
BR2_PACKAGE_HOST_CARGO=y
BR2_PACKAGE_HOST_RUSTC_NIGHTLY=y

BR2_PACKAGE_HOST_IMX_CST=y
